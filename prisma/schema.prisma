generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql" // or your preferred database provider
    url      = env("DATABASE_URL")
}

model Service {
    id            Int            @id @default(autoincrement())
    name          String         @unique
    statusUpdates StatusUpdate[]
}

model StatusUpdate {
    id          Int           @id @default(autoincrement())
    date        DateTime
    status      ServiceStatus
    description String?
    serviceId   Int
    service     Service       @relation(fields: [serviceId], references: [id])
}

model Incident {
    id        Int            @id @default(autoincrement())
    title     String
    status    IncidentStatus
    createdAt DateTime       @default(now())
    updatedAt DateTime       @updatedAt
    timeline  TimelineItem[]
}

model TimelineItem {
    id         Int      @id @default(autoincrement())
    date       DateTime
    message    String
    incidentId Int
    incident   Incident @relation(fields: [incidentId], references: [id])
}

model Maintenance {
    id        Int      @id @default(autoincrement())
    title     String
    startTime DateTime
    endTime   DateTime
}

enum ServiceStatus {
    OPERATIONAL
    DEGRADED
    PARTIAL_OUTAGE
    MAJOR_OUTAGE
}

enum IncidentStatus {
    INVESTIGATING
    IDENTIFIED
    MONITORING
    RESOLVED
}
